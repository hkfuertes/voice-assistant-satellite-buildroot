#!/bin/sh

case "$1" in
    start)
        printf "Loading modules: "
        
        [ -r /etc/modules ] || exit 0
        while read module args; do
            case "$module" in
                ""|\#*) continue ;;
            esac
            echo -n "$module "
            modprobe "$module" $args 2>/dev/null || true
        done < /etc/modules
        echo "done"
        ;;
    stop)
        ;;
    restart)
        $0 stop
        $0 start
        ;;
    *)
        echo "Usage: $0 {start|stop|restart}"
        exit 1
        ;;
esac

exit 0
